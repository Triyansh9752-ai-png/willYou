<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A Heartfelt Proposal</title>
    <!-- Favicon -->
    <link rel="shortcut icon" type="image/png" href="heart.png"/>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts (Dancing Script and Poppins) -->
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
</head>
<body class="min-h-screen bg-gradient-to-br from-pink-200 via-purple-200 to-indigo-200 flex flex-col items-center justify-center relative overflow-hidden">
    <!-- Heart Particles Canvas -->
    <canvas id="heartParticles" class="absolute inset-0 pointer-events-none"></canvas>

    <!-- Main Proposal Section -->
    <div id="parentElement" class="text-center transform transition-all duration-500">
        <!-- Lottie Animation -->
        <div class="flex justify-center mb-6">
            <lottie-player src="https://assets10.lottiefiles.com/private_files/lf30_mywfoph1.json" background="transparent" speed="1" class="w-64 h-64 md:w-80 md:h-80 animate-bounce-slow" loop autoplay></lottie-player>
        </div>
        <!-- Proposal Text -->
        <h1 class="text-4xl md:text-6xl text-white font-dancing-script font-bold mb-8 drop-shadow-lg">
            Will you be my forever love? ðŸ¥°
        </h1>
        <!-- Buttons -->
        <div class="flex flex-col md:flex-row justify-center gap-4 relative">
            <button onclick="propose()" class="bg-white text-pink-600 font-poppins font-semibold py-3 px-6 rounded-full shadow-lg hover:bg-pink-100 hover:scale-105 hover:shadow-pink-300 transition-all duration-300 flex items-center gap-2 z-10">
                Yes! <span class="text-pink-400">ðŸ’–</span>
            </button>
            <button onclick="propose()" class="bg-white text-pink-600 font-poppins font-semibold py-3 px-6 rounded-full shadow-lg hover:bg-pink-100 hover:scale-105 hover:shadow-pink-300 transition-all duration-300 flex items-center gap-2 z-10">
                Absolutely, Yes! <span class="text-pink-400">ðŸŒ¸</span>
            </button>
            <button id="noButton" onclick="moveNoButton()" class="absolute md:static bg-white text-gray-600 font-poppins font-semibold py-3 px-6 rounded-full shadow-lg hover:bg-gray-100 hover:scale-105 hover:shadow-gray-300 transition-all duration-300 flex items-center gap-2 z-10">
                No, maybe? <span class="text-gray-400">ðŸ˜…</span>
            </button>
        </div>
        <!-- Playful Message for No Button -->
        <div id="noMessage" class="hidden text-white font-poppins text-lg mt-4 transition-opacity duration-500">
            Are you sure? ðŸ¥º
        </div>
    </div>

    <!-- Response Section -->
    <div id="showMessage" class="hidden text-center transform transition-all duration-500">
        <!-- Lottie Animation -->
        <div class="flex justify-center mb-6">
            <lottie-player src="https://assets1.lottiefiles.com/packages/lf20_utsfwa3k.json" background="transparent" speed="1" class="w-64 h-64 md:w-80 md:h-80 animate-bounce-slow" loop autoplay></lottie-player>
        </div>
        <!-- Response Text -->
        <h1 class="ml6 text-3xl md:text-5xl text-white font-dancing-script font-bold drop-shadow-lg">
            <span class="text-wrapper">
                <span class="letters">You make my heart soar! I love you! ðŸ’–</span>
            </span>
        </h1>
    </div>

    <!-- Footer -->
    <footer class="absolute bottom-4 text-white font-poppins text-sm z-10">
        Made with ðŸ’– for you | <a href="#" class="underline hover:text-pink-300">Our Story</a>
    </footer>

    <!-- Scripts -->
    <!-- Lottie Player -->
    <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
    <!-- Anime.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/2.0.2/anime.min.js"></script>
    <!-- Confetti.js -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <!-- Custom JavaScript -->
    <script>
        const parentElement = document.getElementById("parentElement");
        const showMessage = document.getElementById("showMessage");
        const noButton = document.getElementById("noButton");
        const noMessage = document.getElementById("noMessage");
        let noButtonMoves = 0;
        const maxMoves = 5; // Limit the number of moves

        function propose() {
            parentElement.classList.add("hidden");
            showMessage.classList.remove("hidden");
            document.body.style.background = "linear-gradient(116.82deg, #ff94e7 0%, #27cbff 100%)";

            // Trigger confetti
            confetti({
                particleCount: 100,
                spread: 70,
                origin: { y: 0.6 },
                colors: ['#ff94e7', '#27cbff', '#ffffff']
            });
        }

        function moveNoButton() {
            if (noButtonMoves >= maxMoves) {
                // Allow clicking after max moves
                noButton.onclick = () => {
                    noMessage.innerText = "Aww, okay... but my heart hopes! ðŸ’”";
                    noMessage.classList.remove("hidden");
                };
                return;
            }

            // Get viewport dimensions
            const buttonWidth = noButton.offsetWidth;
            const buttonHeight = noButton.offsetHeight;
            const maxX = window.innerWidth - buttonWidth - 20; // Ensure button stays within viewport
            const maxY = window.innerHeight - buttonHeight - 20;

            // Ensure positive coordinates and keep button visible
            const newX = Math.max(20, Math.min(maxX, Math.random() * maxX));
            const newY = Math.max(20, Math.min(maxY, Math.random() * maxY));

            // Apply new position and shake animation
            noButton.style.position = "absolute";
            noButton.style.left = `${newX}px`;
            noButton.style.top = `${newY}px`;
            noButton.classList.add("animate-shake");
            setTimeout(() => noButton.classList.remove("animate-shake"), 500);

            // Show playful message
            noMessage.classList.remove("hidden");
            setTimeout(() => noMessage.classList.add("hidden"), 2000);

            noButtonMoves++;
        }

        // Animate Text
        var textWrapper = document.querySelector(".ml6 .letters");
        textWrapper.innerHTML = textWrapper.textContent.replace(/\S/g, "<span class='letter'>$&</span>");

        anime.timeline({ loop: true })
            .add({
                targets: ".ml6 .letter",
                translateY: ["1.1em", 0],
                translateZ: 0,
                duration: 750,
                delay: (el, i) => 50 * i,
            })
            .add({
                targets: ".ml6",
                opacity: 0,
                duration: 1000,
                easing: "easeOutExpo",
                delay: 1000,
            });

        // Heart Particles
        const canvas = document.getElementById("heartParticles");
        const ctx = canvas.getContext("2d");
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const particles = [];
        class Particle {
            constructor() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.size = Math.random() * 10 + 5;
                this.speedX = Math.random() * 2 - 1;
                this.speedY = Math.random() * 2 - 1;
            }
            update() {
                this.x += this.speedX;
                this.y += this.speedY;
                if (this.size > 0.2) this.size -= 0.1;
            }
            draw() {
                ctx.fillStyle = "rgba(255, 182, 193, 0.5)";
                ctx.beginPath();
                ctx.moveTo(this.x, this.y);
                ctx.quadraticCurveTo(this.x + this.size, this.y - this.size, this.x + this.size * 2, this.y);
                ctx.quadraticCurveTo(this.x + this.size, this.y + this.size, this.x, this.y + this.size * 2);
                ctx.quadraticCurveTo(this.x - this.size, this.y + this.size, this.x - this.size * 2, this.y);
                ctx.quadraticCurveTo(this.x - this.size, this.y - this.size, this.x, this.y);
                ctx.fill();
            }
        }

        function handleParticles() {
            for (let i = 0; i < particles.length; i++) {
                particles[i].update();
                particles[i].draw();
                if (particles[i].size <= 0.2) {
                    particles.splice(i, 1);
                    i--;
                }
            }
        }

        function animateParticles() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            if (Math.random() < 0.1) particles.push(new Particle());
            handleParticles();
            requestAnimationFrame(animateParticles);
        }

        animateParticles();

        // Optional Background Music (commented out)
        /*
        const bgMusic = new Audio('path-to-romantic-music.mp3');
        bgMusic.loop = true;
        bgMusic.volume = 0.3;
        bgMusic.play();
        */
    </script>
    <!-- Inline Tailwind Configuration for Custom Animations -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    animation: {
                        'bounce-slow': 'bounce 3s infinite',
                        'shake': 'shake 0.5s ease-in-out',
                    },
                    keyframes: {
                        shake: {
                            '0%, 100%': { transform: 'translateX(0)' },
                            '25%': { transform: 'translateX(-10px)' },
                            '50%': { transform: 'translateX(10px)' },
                            '75%': { transform: 'translateX(-10px)' },
                        },
                    },
                },
            },
        };
    </script>
</body>
</html>
